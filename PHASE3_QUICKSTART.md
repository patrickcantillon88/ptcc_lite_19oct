# Phase 3 Quick Start Guide - Agents System\n\n## What's New\n\nPhase 3 introduces **intelligent agents** that analyze student context and generate proactive recommendations:\n\n- 🎓 **PeriodBriefingAgent**: Pre-lesson context intelligence\n- 🎯 **CCAEngagementAgent**: Enrichment and engagement recommendations\n- ✅ **AccommodationComplianceAgent**: Accessibility and legal compliance reminders\n\nAll agents are coordinated by **AgentOrchestrator** and exposed via the new `/api/agents` endpoints.\n\n## Starting the System\n\n```bash\n# Start everything as usual\n./start-ptcc.sh\n\n# Or start just the backend\ncd backend\npython -m backend.main\n# Backend runs on http://localhost:8001\n```\n\n## Testing the Agents API\n\n### 1. Health Check\n```bash\ncurl http://localhost:8001/api/agents/health\n\n# Expected response:\n# {\"status\": \"healthy\", \"agents\": [...], \"agent_count\": 3}\n```\n\n### 2. List Available Agents\n```bash\ncurl http://localhost:8001/api/agents/list\n```\n\n### 3. Analyze a Student (Full Context)\n```bash\ncurl -X POST http://localhost:8001/api/agents/analyze/1\n\n# Returns aggregated analysis from all agents:\n# - Summary with high-priority alerts\n# - Individual agent outputs with recommendations\n# - Priority levels for each analysis\n```\n\n### 4. Get CLI Display Format (Good for Testing)\n```bash\ncurl http://localhost:8001/api/agents/analyze/1/display\n\n# Returns formatted text output suitable for terminal display\n```\n\n### 5. Analyze with Specific Agent\n```bash\ncurl -X POST http://localhost:8001/api/agents/analyze/1/agent/period_briefing\n\n# Returns only Period Briefing Agent's analysis\n```\n\n### 6. Analyze with Class Code Override\n```bash\ncurl -X POST 'http://localhost:8001/api/agents/analyze/1?class_code=9B&period_code=P3'\n\n# Override student's class code and specify current period\n```\n\n## API Response Example\n\n```json\n{\n  \"student_id\": 1,\n  \"student_name\": \"Alex Johnson\",\n  \"class_code\": \"9A\",\n  \"timestamp\": \"2024-01-15T14:30:00.000000\",\n  \"summary\": \"🎓 BEHAVIOR CONTEXT ANALYSIS SUMMARY\\n━━━━━━━━━━━━━━━━━━━━\\nStudent: Alex Johnson\\nClass: 9A\\n\\n📊 STUDENT PROFILE:\\n  [AT-RISK]\\n  [BEHAVIOR-CONCERN]\\n\\n🚨 HIGH PRIORITY ALERTS:\\n  ⚠️  📋 PERIOD BRIEFING - AT-RISK - Proactive Engagement Required\\n  ⚠️  🎯 CCA ENGAGEMENT - Support Needed - CCA Recommended\\n\\n✅ ANALYSIS STATUS: 3/3 agents completed\",\n  \"high_priority_count\": 2,\n  \"agents\": {\n    \"period_briefing\": {\n      \"agent_name\": \"PeriodBriefingAgent\",\n      \"title\": \"📋 PERIOD BRIEFING - AT-RISK - Proactive Engagement Required\",\n      \"priority\": \"high\",\n      \"action_required\": true,\n      \"intervention_type\": \"briefing\",\n      \"recommended_actions\": [\n        \"Verify TA support is assigned\",\n        \"Have seating arrangement confirmed\",\n        \"Brief on lesson expectations\",\n        \"Monitor proximity for behavior support\",\n        \"Plan movement break timing\"\n      ],\n      \"reasoning\": \"At-risk student with multiple accommodations requires active support\"\n    },\n    \"cca_engagement\": {\n      \"agent_name\": \"CCAEngagementAgent\",\n      \"title\": \"🎯 CCA ENGAGEMENT - Support Needed - CCA Recommended\",\n      \"priority\": \"medium\",\n      \"action_required\": true,\n      \"intervention_type\": \"enrichment\",\n      \"recommended_actions\": [\n        \"Consider: Sports CCA (Physical outlet for energy management)\",\n        \"Consider: Drama CCA (Confidence and social skills in structured setting)\",\n        \"Consider: Leadership CCA (Structure and responsibility)\"\n      ],\n      \"reasoning\": \"Student profile: [AT-RISK], [BEHAVIOR-CONCERN]\"\n    },\n    \"accommodation_compliance\": {\n      \"agent_name\": \"AccommodationComplianceAgent\",\n      \"title\": \"✅ LESSON SETUP CHECKLIST - 14:30 General (Period 1)\",\n      \"priority\": \"medium\",\n      \"action_required\": true,\n      \"intervention_type\": \"compliance\",\n      \"recommended_actions\": [\n        \"✓ Verify seating/positioning at start of lesson\",\n        \"✓ Check sensory tools/aids are accessible\",\n        \"✓ Provide differentiated materials before lesson\",\n        \"✓ Conduct brief wellbeing check-in\"\n      ],\n      \"reasoning\": \"4 accommodations require daily verification\"\n    }\n  }\n}\n```\n\n## File Structure\n\n```\nbackend/\n├── api/\n│   ├── agents/\n│   │   ├── __init__.py\n│   │   ├── period_briefing_agent.py          # Pre-lesson briefing logic\n│   │   ├── cca_engagement_agent.py           # Enrichment recommendations\n│   │   ├── accommodation_compliance_agent.py # Compliance checklists\n│   │   └── agent_orchestrator.py             # Coordinates all agents\n│   └── agents_api.py                         # API endpoints (NEW)\n└── core/\n    └── base_agent.py                         # Base classes (StudentContext, AgentOutput)\n```\n\n## Agent Priorities\n\n### High Priority (Immediate Action)\n- At-risk students identified\n- Medical accommodations present\n- Multiple behavior concerns (2+)\n- Accessibility requirements\n\n### Medium Priority (Action Required)\n- Single anxiety or behavior flag\n- Learning support accommodations\n- Engagement opportunities\n\n### Low Priority (Monitoring)\n- Positive behavior profile\n- No special accommodations\n- Routine engagement tracking\n\n## Common Tasks\n\n### Get Pre-Lesson Briefing\n```python\nimport requests\n\nresponse = requests.post(\n    \"http://localhost:8001/api/agents/analyze/42\",\n    params={\"class_code\": \"9A\", \"period_code\": \"P3\"}\n)\n\ndata = response.json()\nprint(data['summary'])  # High-priority alerts first\n\n# Get Period Briefing specifically\nperiod_brief = data['agents']['period_briefing']\nprint(f\"Priority: {period_brief['priority']}\")\nprint(f\"Actions: {period_brief['recommended_actions']}\")\n```\n\n### Get Enrichment Recommendations\n```python\nresponse = requests.post(\n    \"http://localhost:8001/api/agents/analyze/42/agent/cca_engagement\"\n)\n\nanalysis = response.json()['analysis']\nprint(f\"CCA Recommendations: {analysis['recommended_actions']}\")\n```\n\n### Get Accommodation Compliance Checklist\n```python\nresponse = requests.post(\n    \"http://localhost:8001/api/agents/analyze/42/agent/accommodation_compliance\"\n)\n\nchecklist = response.json()['analysis']\nprint(f\"Setup Checklist: {checklist['recommended_actions']}\")\n```\n\n### Display in Terminal (Good for Testing)\n```bash\n# Get formatted output for terminal\ncurl http://localhost:8001/api/agents/analyze/42/display\n\n# Save to file\ncurl http://localhost:8001/api/agents/analyze/42/display > student_42_brief.txt\ncat student_42_brief.txt\n```\n\n## Data Requirements\n\nFor agents to work effectively, ensure student records have:\n\n1. **Behavior Flags** (in student.notes):\n   - `[AT-RISK]` - Student at risk of disengagement\n   - `[BEHAVIOR-CONCERN]` - Behavior management needed\n   - `[ANXIETY]` - Anxiety support needed\n   - `[SAFEGUARDING]` - Safeguarding concern\n\n2. **Accommodations** (student.accommodations list):\n   - Seating arrangements\n   - Movement breaks\n   - Extra time\n   - Sensory support\n   - etc.\n\n3. **Class Assignment** (student.class_code):\n   - Ensures context is correct\n\n## Troubleshooting\n\n### Agent returns \"No active accommodations\"\n**Solution**: Make sure student has accommodations in database\n```python\n# Check student accommodations\nfrom backend.models.database_models import Student\nstudent = db.query(Student).filter(Student.id == 1).first()\nprint(student.accommodations)  # Should not be empty\n```\n\n### Behavior flags not showing up\n**Solution**: Add flags to student notes\n```python\nstudent.notes = \"[AT-RISK] [BEHAVIOR-CONCERN] Student needs support\"\ndb.commit()\n```\n\n### API returns 404 for student\n**Solution**: Verify student exists in database\n```bash\ncurl http://localhost:8001/api/students  # List all students\ncurl http://localhost:8001/api/students/1  # Get specific student\n```\n\n## Next Steps\n\n1. **Test with Real Data**\n   - Use existing students in the system\n   - Verify agents produce meaningful recommendations\n\n2. **Integrate with Frontend**\n   - Display agent summaries on student profile pages\n   - Show pre-lesson briefings in dashboard\n   - Add CCA recommendations to enrichment section\n\n3. **Set Up Automation**\n   - Schedule briefing generation 10 min before lessons\n   - Send accommodation reminders to TAs\n   - Weekly engagement planning reports\n\n4. **Gather Teacher Feedback**\n   - Are recommendations actionable?\n   - Are priority levels appropriate?\n   - What other agents would be helpful?\n\n## Environment Setup\n\nNo additional environment variables needed for Phase 3. The system uses existing PTCC configuration.\n\n## Performance Notes\n\n- Full analysis typically completes in <500ms\n- Each agent runs independently\n- Results are sorted by priority for display\n- No external API calls required (all local)\n\n## Support\n\nFor detailed documentation, see:\n- `PHASE3_AGENTS_SUMMARY.md` - Full technical documentation\n- `WARP.md` - Project guidelines and standards\n- Agent source files have detailed docstrings\n"}}]