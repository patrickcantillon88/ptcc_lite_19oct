# Frontend Integration Guide - Phase 3 Agents\n\n## Overview\n\nThe Phase 3 agents system has been fully integrated into the frontend with React components, hooks, and styling. This guide explains how to add the agents page to your application.\n\n## New Components Created\n\n### 1. **AgentsPage** - Main container component\n- Full-featured page with student selection and analysis views\n- Sidebar navigation for student selection\n- Toggle between quick briefing and full analysis modes\n- Location: `src/components/AgentsPage.tsx`\n\n### 2. **AgentAnalysis** - Full analysis display\n- Shows all three agents' outputs simultaneously\n- Priority-sorted alerts\n- Expandable agent cards with detailed recommendations\n- Location: `src/components/AgentAnalysis.tsx`\n\n### 3. **AgentBriefing** - Quick pre-lesson view\n- Streamlined single-agent display (Period Briefing)\n- Compact format for quick reference\n- Perfect for before-lesson quick checks\n- Location: `src/components/AgentBriefing.tsx`\n\n### 4. **agentsApi** - API service layer\n- React hooks for data fetching: `useStudentAnalysis`, `useAgentAnalysis`, `useAgentsList`\n- Direct API functions for custom implementations\n- Full TypeScript types for type safety\n- Location: `src/services/agentsApi.ts`\n\n## File Structure\n\n```\nfrontend/mobile-pwa/src/\nâ”œâ”€â”€ services/\nâ”‚   â””â”€â”€ agentsApi.ts                    # API service layer (NEW)\nâ””â”€â”€ components/\n    â”œâ”€â”€ AgentsPage.tsx                  # Main page (NEW)\n    â”œâ”€â”€ AgentsPage.css                  # Page styling (NEW)\n    â”œâ”€â”€ AgentAnalysis.tsx               # Full analysis component (NEW)\n    â”œâ”€â”€ AgentAnalysis.css               # Analysis styling (NEW)\n    â”œâ”€â”€ AgentBriefing.tsx               # Quick briefing component (NEW)\n    â””â”€â”€ AgentBriefing.css               # Briefing styling (NEW)\n```\n\n## Integration Steps\n\n### Step 1: Add Route to Your Router\n\nAdd the agents page to your main App component or routing setup:\n\n```tsx\nimport React from 'react';\nimport AgentsPage from './components/AgentsPage';\n\nfunction App() {\n  // ... existing code ...\n  \n  return (\n    <div className=\"app\">\n      {/* ... other routes ... */}\n      <AgentsPage />\n      {/* ... other routes ... */}\n    </div>\n  );\n}\n\nexport default App;\n```\n\n### Step 2: Update Navigation\n\nAdd a link/button to navigate to the agents page from your main navigation:\n\n```tsx\n// In your main navigation component\n<nav className=\"main-nav\">\n  <Link to=\"/agents\">ðŸ¤– Agents</Link>\n  {/* ... other nav items ... */}\n</nav>\n```\n\n### Step 3: Verify Backend API URL\n\nThe components default to `http://localhost:8001`. If your backend is on a different host/port, update the `API_BASE` in `src/services/agentsApi.ts`:\n\n```tsx\nconst API_BASE = 'http://localhost:8001'; // Change this if needed\n```\n\n## Usage Examples\n\n### Using the Full AgentsPage\n\n```tsx\nimport AgentsPage from './components/AgentsPage';\n\n// Simply render it - it handles everything\n<AgentsPage />\n```\n\n### Using AgentAnalysis Directly\n\n```tsx\nimport AgentAnalysisComponent from './components/AgentAnalysis';\n\n<AgentAnalysisComponent\n  studentId={42}\n  classCode=\"9A\"\n  periodCode=\"P1\"\n/>\n```\n\n### Using AgentBriefing for Quick Display\n\n```tsx\nimport AgentBriefing from './components/AgentBriefing';\n\n<AgentBriefing\n  studentId={42}\n  classCode=\"9A\"\n/>\n```\n\n### Using React Hooks Directly\n\n```tsx\nimport { useStudentAnalysis, useAgentAnalysis } from './services/agentsApi';\n\nfunction MyComponent({ studentId }) {\n  // Get full analysis\n  const { data, loading, error } = useStudentAnalysis(studentId);\n  \n  // Or get specific agent\n  const briefing = useAgentAnalysis(studentId, 'period_briefing');\n  \n  if (loading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error}</div>;\n  \n  return (\n    <div>\n      <h2>{data.student_name}</h2>\n      <p>High priority alerts: {data.high_priority_count}</p>\n    </div>\n  );\n}\n```\n\n### Making Direct API Calls\n\n```tsx\nimport { analyzeStudent, analyzeStudentWithAgent } from './services/agentsApi';\n\n// Analyze with all agents\nconst fullAnalysis = await analyzeStudent(\n  studentId,\n  classCode,\n  periodCode\n);\n\n// Analyze with specific agent\nconst briefingData = await analyzeStudentWithAgent(\n  studentId,\n  'period_briefing',\n  classCode\n);\n```\n\n## API Reference\n\n### useStudentAnalysis Hook\n\n```tsx\nconst { data, loading, error } = useStudentAnalysis(\n  studentId: number | null,\n  classCode?: string\n);\n\n// Returns:\n// data: StudentAnalysisResponse | null\n// loading: boolean\n// error: string | null\n```\n\n### useAgentAnalysis Hook\n\n```tsx\nconst { data, loading, error } = useAgentAnalysis(\n  studentId: number | null,\n  agentName: string,  // 'period_briefing' | 'cca_engagement' | 'accommodation_compliance'\n  classCode?: string\n);\n\n// Returns:\n// data: AgentAnalysis | null\n// loading: boolean\n// error: string | null\n```\n\n### useAgentsList Hook\n\n```tsx\nconst { data, loading, error } = useAgentsList();\n\n// Returns:\n// data: AgentListResponse | null\n// loading: boolean\n// error: string | null\n```\n\n## Type Definitions\n\nAll TypeScript interfaces are exported from `agentsApi.ts`:\n\n```tsx\nimport {\n  StudentAnalysisResponse,\n  AgentAnalysis,\n  AgentListResponse,\n  AgentHealthResponse\n} from './services/agentsApi';\n```\n\n## Styling\n\nAll components come with complete CSS styling:\n- Responsive design (desktop, tablet, mobile)\n- Dark mode compatible\n- WCAG accessible colors and contrast\n- Smooth animations and transitions\n\nCSS files:\n- `AgentsPage.css` - Page layout and structure\n- `AgentAnalysis.css` - Analysis cards and alerts\n- `AgentBriefing.css` - Briefing display\n\n## Customization\n\n### Change API Base URL\n\n```tsx\n// In src/services/agentsApi.ts\nconst API_BASE = 'https://your-backend-domain.com';\n```\n\n### Customize Colors\n\nModify CSS variables in the `.css` files:\n\n```css\n.agent-card.priority-high {\n  border-top-color: #ff8800; /* Change this color */\n}\n```\n\n### Add Additional Agents\n\nThe system is extensible. To add more agents:\n\n1. Backend: Add new agent class to `backend/api/agents/`\n2. Register in `AgentOrchestrator`\n3. Frontend: Add new agent card to `AgentAnalysis.tsx`\n\n## Testing\n\n### Manual Testing Checklist\n\n- [ ] Page loads without errors\n- [ ] Student search works\n- [ ] Student selection loads analysis\n- [ ] Briefing view shows period briefing only\n- [ ] Full analysis shows all three agents\n- [ ] Expandable cards work\n- [ ] High priority alerts display\n- [ ] Recommended actions are visible\n- [ ] Responsive design works on mobile\n- [ ] Loading states appear while fetching\n- [ ] Error messages display properly\n\n### Testing with Sample Data\n\n```tsx\n// If you need to test without real students, mock the API:\nconst mockData = {\n  student_id: 1,\n  student_name: \"Test Student\",\n  class_code: \"9A\",\n  high_priority_count: 2,\n  agents: {\n    period_briefing: {\n      title: \"ðŸ“‹ Test Brief\",\n      priority: \"high\",\n      action_required: true,\n      intervention_type: \"briefing\",\n      recommended_actions: [\"Test action 1\", \"Test action 2\"],\n      reasoning: \"Test reasoning\"\n    },\n    // ... other agents ...\n  }\n};\n```\n\n## Troubleshooting\n\n### Issue: \"Failed to analyze student\"\n\n**Solution**: Ensure backend is running on `http://localhost:8001`\n\n```bash\ncd backend\npython -m backend.main\n```\n\n### Issue: Students list is empty\n\n**Solution**: Verify students exist in the database\n\n```bash\n# Check database\ncurl http://localhost:8001/api/students\n```\n\n### Issue: Styling looks broken\n\n**Solution**: Ensure CSS files are in the same directory as components:\n- `AgentAnalysis.tsx` + `AgentAnalysis.css`\n- `AgentBriefing.tsx` + `AgentBriefing.css`\n- `AgentsPage.tsx` + `AgentsPage.css`\n\n## Performance Notes\n\n- Analysis requests typically take < 500ms\n- Components memoize data to prevent unnecessary re-renders\n- Lazy loading available for large student lists\n- CSS animations are GPU-accelerated\n\n## Browser Support\n\n- Chrome/Chromium 90+\n- Firefox 88+\n- Safari 14+\n- Edge 90+\n- Mobile browsers (iOS Safari 14+, Chrome Mobile)\n\n## Next Steps\n\n1. âœ… Add AgentsPage to your router\n2. âœ… Update navigation to link to agents\n3. âœ… Test with real student data\n4. âœ… Gather teacher feedback\n5. âœ… Consider adding to dashboard home page\n6. âœ… Set up regular briefing generation (optional)\n\n## Support\n\nFor detailed API documentation, see: `PHASE3_AGENTS_SUMMARY.md`\nFor quick start guide, see: `PHASE3_QUICKSTART.md`\n"}}]